version: 1
url: https://github.com
iteration: 10
precondition:
  url: https://github.com/login
  steps:
    - action:
        type: input
        form:
          selector: 'input[name="login"]'
          value: {{ env USER_EMAIL }}
    - action:
        type: input
        form:
          selector: 'input[name="password"]'
          value: {{ env USER_PASSWORD }}
    - action:
        type: click
        selector: 'input[name="commit"]'
    - action:
        type: wait
        duration: 1000
    - action:
        type: ensure
        location:
          value: 'https://github.com/'
steps:
  - action:
      type: input
      form:
        selector: '#dashboard-repos-filter-left'
        constrains:
          required: True
          regexp: '(?:[a-z]|[0-9]|[ぁ-ヶ]|[亜-黑]|ー){10,255}'
  - action:
      type: input
      form:
        selector: 'input[name="post[body]"]'
        constrains:
          require: True
          regexp: '(?:[a-z]|[0-9]|[ぁ-ヶ]|[亜-黑]|ー){10,255}'
  - action:
      type: select
      form:
        selector: 'select[name="post[category_id]"]'
        constrains:
          require: True
          values:
            - 1
            - 2
            - 3
  - action:
      type: click
      selector: 'input[name="commit"]'
  - action:
      type: wait
      duration: 1000
  - action:
      type: ensure
      location:
        regexp: 'http://localhost:3000/posts/[0-9]+'